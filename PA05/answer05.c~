#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include "answer05.h"
int main(int argc, char * * argv)//codes from book
{
  if(argc < 2)
  {
    printf("need one positive integer.\n");
    return EXIT_FAILURE;
  }
  int n = (int)strtol(argv[1], NULL, 10);
  if(n <= 0)
  {
    printf("need one positive integer.\n");
    return EXIT_FAILURE;
  }
  int * arr;
  arr = malloc (sizeof(int) * n);
  partition (arr, 0, n);
  free (arr);
  printf("f(%d) = %d.\n", n, f(n));
  return EXIT_SUCCESS;
}
int f(int n)//codes from book
{
  int i;
  int sum = 0;
  if(n == 1)
    {
      return 1;
    }
  for(i = 1; i < n; i++)
    {
      sum += f(n-i);
    }
  sum++;
  return sum;
}
void printPartition(int * arr, int length)
{
  int ind;
  for(ind = 0; ind < length-1; ind++)
    {
      printf ("%d + ",arr[ind]);
    }
  printf ("%d\n",arr[length-1]);
}
void partition(int * arr, int ind, int left)
{
  int val;
  if(left == 0)
    {
      printPartition(arr, ind);
      return;
    }
  for(val = 1;val <= left; val++)
    {
      arr[ind]=val;
      partition(arr, ind + 1, left-val) ;
    }
}
